# تشغيل إنتاجي نظيف لـ UberFix

يوضح هذا الدليل أسرع طريقة لإجراء تثبيت وبناء نظيفين استعداداً للتشغيل في بيئة الإنتاج.

## المتطلبات
- Node.js 20.10.0 أو أحدث (يفضّل Node 20 LTS)
- pnpm 10 أو أحدث
- ضبط متغيرات البيئة المطلوبة في ملف `.env` (مثل `VITE_SUPABASE_URL` و`VITE_SUPABASE_ANON_KEY`)

> **تنبيه:** تأكد من أن شبكة Supabase وواجهات برمجة Google/Twilio/Resend مضبوطة بقيم الإنتاج قبل البدء في البناء.

## خطوة واحدة للتثبيت والبناء
لتنفيذ عملية نظيفة بالكامل (إزالة `node_modules`، تنظيف مخزن pnpm، ثم التثبيت والبناء) استخدم السكربت الجديد:

```bash
bash scripts/production-build.sh
```

السكربت يقوم بالآتي:
1. حذف مجلد `node_modules` إن وجد لتفريغ أي تبعيات سابقة.
2. تنظيف مخزن pnpm المحلي لتجنب أي حزم قديمة.
3. تثبيت التبعيات باستخدام `pnpm install --frozen-lockfile` لضمان تطابق الإصدارات مع ملف القفل.
4. تشغيل `pnpm build` لإنتاج ملفات `dist/` الجاهزة للنشر.

## خطوات يدوية (عند الحاجة)
إذا أردت تنفيذ الخطوات يدوياً، قم بالتالي من جذر المشروع:

```bash
rm -rf node_modules
rm -rf "$(pnpm store path)"
pnpm install --frozen-lockfile
pnpm build
```

## التحقق بعد البناء
- تأكد من إنشاء مجلد `dist/` وأنه يحتوي على ملفات Vite المضغوطة.
- شغّل معاينة الإنتاج محلياً للتحقق السريع:

```bash
pnpm preview --host 0.0.0.0 --port 4173
```

> يمكن استخدام الأمر أعلاه لتجربة الحزمة على نفس الجهاز أو عبر متصفح متصل بنفس الشبكة.
